{"ast":null,"code":"var _jsxFileName = \"/media/shohedul/New Volume/shop/contexts/cart/use-cart.tsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useReducer, useContext, createContext } from 'react';\nimport { reducer, cartItemsTotalPrice } from './cart.reducer';\nimport { useStorage } from 'helper/use-storage';\nconst CartContext = /*#__PURE__*/createContext({});\nconst INITIAL_STATE = {\n  isOpen: false,\n  items: [],\n  coupon: null\n};\n\nconst useCartActions = (initialCart = INITIAL_STATE) => {\n  var _state$items3;\n\n  const {\n    0: state,\n    1: dispatch\n  } = useReducer(reducer, initialCart);\n\n  const addItemHandler = (item, quantity = 1) => {\n    dispatch({\n      type: 'ADD_ITEM',\n      payload: _objectSpread(_objectSpread({}, item), {}, {\n        quantity\n      })\n    });\n  };\n\n  const removeItemHandler = (item, quantity = 1) => {\n    dispatch({\n      type: 'REMOVE_ITEM',\n      payload: _objectSpread(_objectSpread({}, item), {}, {\n        quantity\n      })\n    });\n  };\n\n  const clearItemFromCartHandler = item => {\n    dispatch({\n      type: 'CLEAR_ITEM_FROM_CART',\n      payload: item\n    });\n  };\n\n  const clearCartHandler = () => {\n    dispatch({\n      type: 'CLEAR_CART'\n    });\n  };\n\n  const toggleCartHandler = () => {\n    dispatch({\n      type: 'TOGGLE_CART'\n    });\n  };\n\n  const couponHandler = coupon => {\n    dispatch({\n      type: 'APPLY_COUPON',\n      payload: coupon\n    });\n  };\n\n  const removeCouponHandler = () => {\n    dispatch({\n      type: 'REMOVE_COUPON'\n    });\n  };\n\n  const rehydrateLocalState = payload => {\n    dispatch({\n      type: 'REHYDRATE',\n      payload\n    });\n  };\n\n  const isInCartHandler = id => {\n    var _state$items;\n\n    return (_state$items = state.items) === null || _state$items === void 0 ? void 0 : _state$items.some(item => item.id === id);\n  };\n\n  const getItemHandler = id => {\n    var _state$items2;\n\n    return (_state$items2 = state.items) === null || _state$items2 === void 0 ? void 0 : _state$items2.find(item => item.id === id);\n  };\n\n  const getCartItemsPrice = () => cartItemsTotalPrice(state.items).toFixed(2);\n\n  const getCartItemsTotalPrice = () => cartItemsTotalPrice(state.items, state.coupon).toFixed(2);\n\n  const getDiscount = () => {\n    var _state$coupon;\n\n    const total = cartItemsTotalPrice(state.items);\n    const discount = state.coupon ? total * Number((_state$coupon = state.coupon) === null || _state$coupon === void 0 ? void 0 : _state$coupon.discountInPercent) / 100 : 0;\n    return discount.toFixed(2);\n  };\n\n  const getItemsCount = (_state$items3 = state.items) === null || _state$items3 === void 0 ? void 0 : _state$items3.reduce((acc, item) => acc + item.quantity, 0);\n  return {\n    state,\n    getItemsCount,\n    rehydrateLocalState,\n    addItemHandler,\n    removeItemHandler,\n    clearItemFromCartHandler,\n    clearCartHandler,\n    isInCartHandler,\n    getItemHandler,\n    toggleCartHandler,\n    getCartItemsTotalPrice,\n    getCartItemsPrice,\n    couponHandler,\n    removeCouponHandler,\n    getDiscount\n  };\n};\n\nexport const CartProvider = ({\n  children\n}) => {\n  var _state$items4;\n\n  const {\n    state,\n    rehydrateLocalState,\n    getItemsCount,\n    addItemHandler,\n    removeItemHandler,\n    clearItemFromCartHandler,\n    clearCartHandler,\n    isInCartHandler,\n    getItemHandler,\n    toggleCartHandler,\n    getCartItemsTotalPrice,\n    couponHandler,\n    removeCouponHandler,\n    getCartItemsPrice,\n    getDiscount\n  } = useCartActions();\n  const {\n    rehydrated,\n    error\n  } = useStorage(state, rehydrateLocalState);\n  return __jsx(CartContext.Provider, {\n    value: {\n      isOpen: state.isOpen,\n      items: state.items,\n      coupon: state.coupon,\n      cartItemsCount: (_state$items4 = state.items) === null || _state$items4 === void 0 ? void 0 : _state$items4.length,\n      itemsCount: getItemsCount,\n      addItem: addItemHandler,\n      removeItem: removeItemHandler,\n      removeItemFromCart: clearItemFromCartHandler,\n      clearCart: clearCartHandler,\n      isInCart: isInCartHandler,\n      getItem: getItemHandler,\n      toggleCart: toggleCartHandler,\n      calculatePrice: getCartItemsTotalPrice,\n      calculateSubTotalPrice: getCartItemsPrice,\n      applyCoupon: couponHandler,\n      removeCoupon: removeCouponHandler,\n      calculateDiscount: getDiscount\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, children);\n};\nexport const useCart = () => useContext(CartContext);","map":{"version":3,"names":["React","useReducer","useContext","createContext","reducer","cartItemsTotalPrice","useStorage","CartContext","INITIAL_STATE","isOpen","items","coupon","useCartActions","initialCart","state","dispatch","addItemHandler","item","quantity","type","payload","removeItemHandler","clearItemFromCartHandler","clearCartHandler","toggleCartHandler","couponHandler","removeCouponHandler","rehydrateLocalState","isInCartHandler","id","some","getItemHandler","find","getCartItemsPrice","toFixed","getCartItemsTotalPrice","getDiscount","total","discount","Number","discountInPercent","getItemsCount","reduce","acc","CartProvider","children","rehydrated","error","cartItemsCount","length","itemsCount","addItem","removeItem","removeItemFromCart","clearCart","isInCart","getItem","toggleCart","calculatePrice","calculateSubTotalPrice","applyCoupon","removeCoupon","calculateDiscount","useCart"],"sources":["/media/shohedul/New Volume/shop/contexts/cart/use-cart.tsx"],"sourcesContent":["import React, { useReducer, useContext, createContext } from 'react';\nimport { reducer, cartItemsTotalPrice } from './cart.reducer';\nimport { useStorage } from 'helper/use-storage';\nconst CartContext = createContext({} as any);\nconst INITIAL_STATE = {\n  isOpen: false,\n  items: [],\n  coupon: null,\n};\n\nconst useCartActions = (initialCart = INITIAL_STATE) => {\n  const [state, dispatch] = useReducer(reducer, initialCart);\n\n  const addItemHandler = (item, quantity = 1) => {\n    dispatch({ type: 'ADD_ITEM', payload: { ...item, quantity } });\n  };\n\n  const removeItemHandler = (item, quantity = 1) => {\n    dispatch({ type: 'REMOVE_ITEM', payload: { ...item, quantity } });\n  };\n\n  const clearItemFromCartHandler = (item) => {\n    dispatch({ type: 'CLEAR_ITEM_FROM_CART', payload: item });\n  };\n\n  const clearCartHandler = () => {\n    dispatch({ type: 'CLEAR_CART' });\n  };\n  const toggleCartHandler = () => {\n    dispatch({ type: 'TOGGLE_CART' });\n  };\n  const couponHandler = (coupon) => {\n    dispatch({ type: 'APPLY_COUPON', payload: coupon });\n  };\n  const removeCouponHandler = () => {\n    dispatch({ type: 'REMOVE_COUPON' });\n  };\n  const rehydrateLocalState = (payload) => {\n    dispatch({ type: 'REHYDRATE', payload });\n  };\n  const isInCartHandler = (id) => {\n    return state.items?.some((item) => item.id === id);\n  };\n  const getItemHandler = (id) => {\n    return state.items?.find((item) => item.id === id);\n  };\n  const getCartItemsPrice = () => cartItemsTotalPrice(state.items).toFixed(2);\n  const getCartItemsTotalPrice = () =>\n    cartItemsTotalPrice(state.items, state.coupon).toFixed(2);\n\n  const getDiscount = () => {\n    const total = cartItemsTotalPrice(state.items);\n    const discount = state.coupon\n      ? (total * Number(state.coupon?.discountInPercent)) / 100\n      : 0;\n    return discount.toFixed(2);\n  };\n  const getItemsCount = state.items?.reduce(\n    (acc, item) => acc + item.quantity,\n    0\n  );\n  return {\n    state,\n    getItemsCount,\n    rehydrateLocalState,\n    addItemHandler,\n    removeItemHandler,\n    clearItemFromCartHandler,\n    clearCartHandler,\n    isInCartHandler,\n    getItemHandler,\n    toggleCartHandler,\n    getCartItemsTotalPrice,\n    getCartItemsPrice,\n    couponHandler,\n    removeCouponHandler,\n    getDiscount,\n  };\n};\n\nexport const CartProvider = ({ children }) => {\n  const {\n    state,\n    rehydrateLocalState,\n    getItemsCount,\n    addItemHandler,\n    removeItemHandler,\n    clearItemFromCartHandler,\n    clearCartHandler,\n    isInCartHandler,\n    getItemHandler,\n    toggleCartHandler,\n    getCartItemsTotalPrice,\n    couponHandler,\n    removeCouponHandler,\n    getCartItemsPrice,\n    getDiscount,\n  } = useCartActions();\n  const { rehydrated, error } = useStorage(state, rehydrateLocalState);\n\n  return (\n    <CartContext.Provider\n      value={{\n        isOpen: state.isOpen,\n        items: state.items,\n        coupon: state.coupon,\n        cartItemsCount: state.items?.length,\n        itemsCount: getItemsCount,\n        addItem: addItemHandler,\n        removeItem: removeItemHandler,\n        removeItemFromCart: clearItemFromCartHandler,\n        clearCart: clearCartHandler,\n        isInCart: isInCartHandler,\n        getItem: getItemHandler,\n        toggleCart: toggleCartHandler,\n        calculatePrice: getCartItemsTotalPrice,\n        calculateSubTotalPrice: getCartItemsPrice,\n        applyCoupon: couponHandler,\n        removeCoupon: removeCouponHandler,\n        calculateDiscount: getDiscount,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n};\n\nexport const useCart = () => useContext(CartContext);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}